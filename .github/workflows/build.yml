name: Build WsaPatch.dll

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

env:
  # Path to the solution file relative to the root of the project.
  SOLUTION_FILE_PATH: .
  BUILD_CONFIGURATION: Release

permissions:
  contents: read

jobs:
  build:
    runs-on: windows-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Configure
        run: |
          cmake -G "Visual Studio 17 2022" -A x64 -B build

      - name: Build Release
        run: cmake --build build --config Release --verbose

      - name: Upload WsaPatch.dll
        uses: actions/upload-artifact@v3
        with:
          name: WsaPatch-build
          path: .\build
- name: Upload Android App to Play Store
  # You may pin to the exact commit or the version.
  # uses: bbjoern/upload-google-play@819c710bc648f63b7a1e668b0e59af8b2addaf57
  uses: bbjoern/upload-google-play@v0.0.6
  with:
    # The service account json private key file to authorize the upload request
    serviceAccountJson: # optional
    # The raw json text of the service account private key to authorize the upload request
    serviceAccountJsonPlainText: # optional
    # The package name, or Application Id, of the app you are uploading
    packageName: 
    # The Android release file to upload (.apk or .aab)
    releaseFile: # optional
    # The Android release file(s) to upload (.apk or .aab). Separated by  a ',' for multiple artifacts. Supports glob
    releaseFiles: # optional
    # The name of this release. If not set it's generated automatically from the APKs versionName
    releaseName: # optional
    # The track in which you want to assign the uploaded app.
    track: # default is production
    # In-app update priority of the release. All newly added APKs in the release will be considered at this priority. Can take values in the range [0, 5], with 5 the highest priority. Defaults to 0.
    inAppUpdatePriority: # optional, default is 0
    # Portion of users who should get the staged version of the app. Accepts values between 0.0 and 1.0 (exclusive-exclusive).
    userFraction: # optional
    # Release status. This can be set to 'draft' to complete the release at some other time.
    status: # optional
    # The directory of localized whats new files
    whatsNewDirectory: # optional
    # The mapping.txt file used to de-obfuscate your stack traces from crash reports
    mappingFile: # optional
